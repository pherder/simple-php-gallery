/*!
 * Lightbox for Bootstrap by @ashleydw
 * https://github.com/ashleydw/lightbox
 *
 * License: https://github.com/ashleydw/lightbox/blob/master/LICENSE
 */
+function(){'use strict';function a(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var b=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),c=function(c){var d='ekkoLightbox',e=c.fn[d],f={title:'',footer:'',maxWidth:9999,maxHeight:9999,showArrows:!0,wrapping:!0,type:null,alwaysShowClose:!1,loadingMessage:'<div class="ekko-lightbox-loader"><div><div></div><div></div></div></div>',leftArrow:'<span>&#10094;</span>',rightArrow:'<span>&#10095;</span>',strings:{close:'Close',fail:'Failed to load image:',type:'Could not detect remote target type. Force the type using data-type'},doc:document,onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){},onNavigate:function(){},onContentLoaded:function(){}},g=function(){function d(b,e){var g=this;a(this,d),this._config=c.extend({},f,e),this._$modalArrows=null,this._galleryIndex=0,this._galleryName=null,this._padding=null,this._border=null,this._titleIsShown=!1,this._footerIsShown=!1,this._wantedWidth=0,this._wantedHeight=0,this._touchstartX=0,this._touchendX=0,this._modalId='ekkoLightbox-'+Math.floor(1e3*Math.random()+1),this._$element=b instanceof jQuery?b:c(b),this._isBootstrap3=3==c.fn.modal.Constructor.VERSION[0];var h='<h4 class="modal-title">'+(this._config.title||'&nbsp;')+'</h4>',i='<button type="button" class="close" data-dismiss="modal" aria-label="'+this._config.strings.close+'"><span aria-hidden="true">&times;</span></button>',j='<div class="modal-header'+(this._config.title||this._config.alwaysShowClose?'':' hide')+'">'+(this._isBootstrap3?i+h:h+i)+'</div>',k='<div class="modal-footer'+(this._config.footer?'':' hide')+'">'+(this._config.footer||'&nbsp;')+'</div>';c(this._config.doc.body).append('<div id="'+this._modalId+'" class="ekko-lightbox modal fade" tabindex="-1" tabindex="-1" role="dialog" aria-hidden="true">'+('<div class="modal-dialog" role="document"><div class="modal-content">'+j+'<div class="modal-body"><div class="ekko-lightbox-container"><div class="ekko-lightbox-item fade in show"></div><div class="ekko-lightbox-item fade"></div></div></div>'+k+'</div></div>')+'</div>'),this._$modal=c('#'+this._modalId,this._config.doc),this._$modalDialog=this._$modal.find('.modal-dialog').first(),this._$modalContent=this._$modal.find('.modal-content').first(),this._$modalBody=this._$modal.find('.modal-body').first(),this._$modalHeader=this._$modal.find('.modal-header').first(),this._$modalFooter=this._$modal.find('.modal-footer').first(),this._$lightboxContainer=this._$modalBody.find('.ekko-lightbox-container').first(),this._$lightboxBodyOne=this._$lightboxContainer.find('> div:first-child').first(),this._$lightboxBodyTwo=this._$lightboxContainer.find('> div:last-child').first(),this._border=this._calculateBorders(),this._padding=this._calculatePadding(),this._galleryName=this._$element.data('gallery'),this._galleryName&&(this._$galleryItems=c(document.body).find('*[data-gallery="'+this._galleryName+'"]'),this._galleryIndex=this._$galleryItems.index(this._$element),c(document).on('keydown.ekkoLightbox',this._navigationalBinder.bind(this)),this._config.showArrows&&1<this._$galleryItems.length&&(this._$lightboxContainer.append('<div class="ekko-lightbox-nav-overlay"><a href="#">'+this._config.leftArrow+'</a><a href="#">'+this._config.rightArrow+'</a></div>'),this._$modalArrows=this._$lightboxContainer.find('div.ekko-lightbox-nav-overlay').first(),this._$lightboxContainer.on('click','a:first-child',function(a){return a.preventDefault(),g.navigateLeft()}),this._$lightboxContainer.on('click','a:last-child',function(a){return a.preventDefault(),g.navigateRight()}),this.updateNavigation())),this._$modal.on('show.bs.modal',this._config.onShow.bind(this)).on('shown.bs.modal',function(){return g._toggleLoading(!0),g._handle(),g._config.onShown.call(g)}).on('hide.bs.modal',this._config.onHide.bind(this)).on('hidden.bs.modal',function(){return g._galleryName&&(c(document).off('keydown.ekkoLightbox'),c(window).off('resize.ekkoLightbox')),g._$modal.remove(),g._config.onHidden.call(g)}).modal(this._config),c(window).on('resize.ekkoLightbox',function(){g._resize(g._wantedWidth,g._wantedHeight)}),this._$lightboxContainer.on('touchstart',function(){g._touchstartX=event.changedTouches[0].screenX}).on('touchend',function(){g._touchendX=event.changedTouches[0].screenX,g._swipeGesure()})}return b(d,null,[{key:'Default',get:function(){return f}}]),b(d,[{key:'element',value:function(){return this._$element}},{key:'modal',value:function(){return this._$modal}},{key:'navigateTo',value:function(a){return 0>a||a>this._$galleryItems.length-1?this:void(this._galleryIndex=a,this.updateNavigation(),this._$element=c(this._$galleryItems.get(this._galleryIndex)),this._handle())}},{key:'navigateLeft',value:function(){if(this._$galleryItems&&1!==this._$galleryItems.length){if(0!==this._galleryIndex)this._galleryIndex--;else if(this._config.wrapping)this._galleryIndex=this._$galleryItems.length-1;else return;return this._config.onNavigate.call(this,'left',this._galleryIndex),this.navigateTo(this._galleryIndex)}}},{key:'navigateRight',value:function(){if(this._$galleryItems&&1!==this._$galleryItems.length){if(this._galleryIndex!==this._$galleryItems.length-1)this._galleryIndex++;else if(this._config.wrapping)this._galleryIndex=0;else return;return this._config.onNavigate.call(this,'right',this._galleryIndex),this.navigateTo(this._galleryIndex)}}},{key:'updateNavigation',value:function(){if(!this._config.wrapping){var a=this._$lightboxContainer.find('div.ekko-lightbox-nav-overlay');0===this._galleryIndex?a.find('a:first-child').addClass('disabled'):a.find('a:first-child').removeClass('disabled'),this._galleryIndex===this._$galleryItems.length-1?a.find('a:last-child').addClass('disabled'):a.find('a:last-child').removeClass('disabled')}}},{key:'close',value:function(){return this._$modal.modal('hide')}},{key:'_navigationalBinder',value:function(a){return a=a||window.event,39===a.keyCode?this.navigateRight():37===a.keyCode?this.navigateLeft():void 0}},{key:'_detectRemoteType',value:function(a,b){return b=b||!1,!b&&this._isImage(a)&&(b='image'),!b&&this._getYoutubeId(a)&&(b='youtube'),!b&&this._getVimeoId(a)&&(b='vimeo'),!b&&this._getInstagramId(a)&&(b='instagram'),(!b||0>['image','youtube','vimeo','instagram','video','url'].indexOf(b))&&(b='url'),b}},{key:'_isImage',value:function(a){return a&&a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)}},{key:'_containerToUse',value:function(){var a=this,b=this._$lightboxBodyTwo,c=this._$lightboxBodyOne;return this._$lightboxBodyTwo.hasClass('in')&&(b=this._$lightboxBodyOne,c=this._$lightboxBodyTwo),c.removeClass('in show'),setTimeout(function(){a._$lightboxBodyTwo.hasClass('in')||a._$lightboxBodyTwo.empty(),a._$lightboxBodyOne.hasClass('in')||a._$lightboxBodyOne.empty()},500),b.addClass('in show'),b}},{key:'_handle',value:function(){var a=this._containerToUse();this._updateTitleAndFooter();var b=this._$element.attr('data-remote')||this._$element.attr('href'),c=this._detectRemoteType(b,this._$element.attr('data-type')||!1);return 0>['image','youtube','vimeo','instagram','video','url'].indexOf(c)?this._error(this._config.strings.type):('image'===c?(this._preloadImage(b,a),this._preloadImageByIndex(this._galleryIndex,3)):'youtube'===c?this._showYoutubeVideo(b,a):'vimeo'===c?this._showVimeoVideo(this._getVimeoId(b),a):'instagram'===c?this._showInstagramVideo(this._getInstagramId(b),a):'video'===c?this._showHtml5Video(b,a):this._loadRemoteContent(b,a),this)}},{key:'_getYoutubeId',value:function(a){if(!a)return!1;var b=a.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);return b&&11===b[2].length&&b[2]}},{key:'_getVimeoId',value:function(a){return a&&0<a.indexOf('vimeo')&&a}},{key:'_getInstagramId',value:function(a){return a&&0<a.indexOf('instagram')&&a}},{key:'_toggleLoading',value:function(a){return a=a||!1,a?(this._$modalDialog.css('display','none'),this._$modal.removeClass('in show'),c('.modal-backdrop').append(this._config.loadingMessage)):(this._$modalDialog.css('display','block'),this._$modal.addClass('in show'),c('.modal-backdrop').find('.ekko-lightbox-loader').remove()),this}},{key:'_calculateBorders',value:function(){return{top:this._totalCssByAttribute('border-top-width'),right:this._totalCssByAttribute('border-right-width'),bottom:this._totalCssByAttribute('border-bottom-width'),left:this._totalCssByAttribute('border-left-width')}}},{key:'_calculatePadding',value:function(){return{top:this._totalCssByAttribute('padding-top'),right:this._totalCssByAttribute('padding-right'),bottom:this._totalCssByAttribute('padding-bottom'),left:this._totalCssByAttribute('padding-left')}}},{key:'_totalCssByAttribute',value:function(a){return parseInt(this._$modalDialog.css(a),10)+parseInt(this._$modalContent.css(a),10)+parseInt(this._$modalBody.css(a),10)}},{key:'_updateTitleAndFooter',value:function(){var a=this._$element.data('title')||'',b=this._$element.data('footer')||'';return this._titleIsShown=!1,a||this._config.alwaysShowClose?(this._titleIsShown=!0,this._$modalHeader.css('display','').find('.modal-title').html(a||'&nbsp;')):this._$modalHeader.css('display','none'),this._footerIsShown=!1,b?(this._footerIsShown=!0,this._$modalFooter.css('display','').html(b)):this._$modalFooter.css('display','none'),this}},{key:'_showYoutubeVideo',value:function(a,b){var c=this._getYoutubeId(a),d=0<a.indexOf('&')?a.substr(a.indexOf('&')):'',e=this._$element.data('width')||560,f=this._$element.data('height')||e/(560/315);return this._showVideoIframe('//www.youtube.com/embed/'+c+'?badge=0&autoplay=1&html5=1'+d,e,f,b)}},{key:'_showVimeoVideo',value:function(a,b){var c=this._$element.data('width')||500,d=this._$element.data('height')||c/(560/315);return this._showVideoIframe(a+'?autoplay=1',c,d,b)}},{key:'_showInstagramVideo',value:function(a,b){var c=this._$element.data('width')||612,d=c+80;return a='/'===a.substr(-1)?a:a+'/',b.html('<iframe width="'+c+'" height="'+d+'" src="'+a+'embed/" frameborder="0" allowfullscreen></iframe>'),this._resize(c,d),this._config.onContentLoaded.call(this),this._$modalArrows&&this._$modalArrows.css('display','none'),this._toggleLoading(!1),this}},{key:'_showVideoIframe',value:function(a,b,c,d){return c=c||b,d.html('<div class="embed-responsive embed-responsive-16by9"><iframe width="'+b+'" height="'+c+'" src="'+a+'" frameborder="0" allowfullscreen class="embed-responsive-item"></iframe></div>'),this._resize(b,c),this._config.onContentLoaded.call(this),this._$modalArrows&&this._$modalArrows.css('display','none'),this._toggleLoading(!1),this}},{key:'_showHtml5Video',value:function(a,b){var c=this._$element.data('width')||560,d=this._$element.data('height')||c/(560/315);return b.html('<div class="embed-responsive embed-responsive-16by9"><video width="'+c+'" height="'+d+'" src="'+a+'" preload="auto" autoplay controls class="embed-responsive-item"></video></div>'),this._resize(c,d),this._config.onContentLoaded.call(this),this._$modalArrows&&this._$modalArrows.css('display','none'),this._toggleLoading(!1),this}},{key:'_loadRemoteContent',value:function(a,b){var d=this,e=this._$element.data('width')||560,f=this._$element.data('height')||560,g=this._$element.data('disableExternalCheck')||!1;return this._toggleLoading(!1),g||this._isExternal(a)?(b.html('<iframe src="'+a+'" frameborder="0" allowfullscreen></iframe>'),this._config.onContentLoaded.call(this)):b.load(a,c.proxy(function(){return d._$element.trigger('loaded.bs.modal')})),this._$modalArrows&&this._$modalArrows.css('display','none'),this._resize(e,f),this}},{key:'_isExternal',value:function(a){var b=a.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);return'string'==typeof b[1]&&0<b[1].length&&b[1].toLowerCase()!==location.protocol||'string'==typeof b[2]&&0<b[2].length&&b[2].replace(new RegExp(':('+{"http:":80,"https:":443}[location.protocol]+')?$'),'')!==location.host}},{key:'_error',value:function(a){return console.error(a),this._containerToUse().html(a),this._resize(300,300),this}},{key:'_preloadImageByIndex',value:function(a,b){if(this._$galleryItems){var d=c(this._$galleryItems.get(a),!1);if('undefined'!=typeof d){var e=d.attr('data-remote')||d.attr('href');if(('image'===d.attr('data-type')||this._isImage(e))&&this._preloadImage(e,!1),0<b)return this._preloadImageByIndex(a+1,b-1)}}}},{key:'_preloadImage',value:function(a,b){var d=this;b=b||!1;var e=new Image;return b&&function(){var f=setTimeout(function(){b.append(d._config.loadingMessage)},200);e.onload=function(){f&&clearTimeout(f),f=null;var a=c('<img />');return a.attr('src',e.src),a.addClass('img-fluid'),a.css('width','100%'),b.html(a),d._$modalArrows&&d._$modalArrows.css('display',''),d._resize(e.width,e.height),d._toggleLoading(!1),d._config.onContentLoaded.call(d)},e.onerror=function(){return d._toggleLoading(!1),d._error(d._config.strings.fail+('  '+a))}}(),e.src=a,e}},{key:'_swipeGesure',value:function(){return this._touchendX<this._touchstartX?this.navigateRight():this._touchendX>this._touchstartX?this.navigateLeft():void 0}},{key:'_resize',value:function(a,b){var d=Math.min;b=b||a,this._wantedWidth=a,this._wantedHeight=b;var e=a/b,f=this._padding.left+this._padding.right+this._border.left+this._border.right,g=575<this._config.doc.body.clientWidth?20:0,h=575<this._config.doc.body.clientWidth?0:20,i=d(a+f,this._config.doc.body.clientWidth-g,this._config.maxWidth);a+f>i?(b=(i-f-h)/e,a=i):a+=f;var j=0,k=0;this._footerIsShown&&(k=this._$modalFooter.outerHeight(!0)||55),this._titleIsShown&&(j=this._$modalHeader.outerHeight(!0)||67);var l=this._padding.top+this._padding.bottom+this._border.bottom+this._border.top,m=parseFloat(this._$modalDialog.css('margin-top'))+parseFloat(this._$modalDialog.css('margin-bottom')),n=d(b,c(window).height()-l-m-j-k,this._config.maxHeight-l-j-k);b>n&&(a=Math.ceil(n*e)+f),this._$lightboxContainer.css('height',n),this._$modalDialog.css('flex',1).css('maxWidth',a);var o=this._$modal.data('bs.modal');if(o)try{o._handleUpdate()}catch(a){o.handleUpdate()}return this}}],[{key:'_jQueryInterface',value:function(a){var b=this;return a=a||{},this.each(function(){var e=c(b),f=c.extend({},d.Default,e.data(),'object'==typeof a&&a);new d(b,f)})}}]),d}();return c.fn[d]=g._jQueryInterface,c.fn[d].Constructor=g,c.fn[d].noConflict=function(){return c.fn[d]=e,g._jQueryInterface},g}(jQuery)}(jQuery);